<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Birthday Surprise</title>
  <meta name="description" content="A birthday greeting page" />
  <style>
    :root{
      --bg1:#070814;
      --bg2:#0b1030;
      --card: rgba(255,255,255,.08);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.70);
      --accent1:#ff4fd8;
      --accent2:#7c5cff;
      --accent3:#32ffd7;
      --gold:#ffd36b;
      --shadow: 0 20px 70px rgba(0,0,0,.45);
      --radius: 22px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--text);
      background:
        radial-gradient(1200px 800px at 20% 10%, rgba(255,79,216,.22), transparent 60%),
        radial-gradient(1000px 700px at 80% 20%, rgba(124,92,255,.22), transparent 60%),
        radial-gradient(900px 650px at 50% 90%, rgba(50,255,215,.14), transparent 60%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      overflow-x:hidden;
    }

    .stars{
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:0;
    }
    canvas#stars{width:100%;height:100%}

    canvas#confetti{
      position:fixed;
      inset:0;
      width:100%;
      height:100%;
      pointer-events:none;
      z-index:6;
    }
    canvas#fx{
      position:fixed;
      inset:0;
      width:100%;
      height:100%;
      pointer-events:none;
      z-index:7;
    }

    .wrap{
      position:relative;
      z-index:1;
      max-width:1100px;
      margin:0 auto;
      padding:28px 18px 64px;
    }

    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom:18px;
    }
    .chip{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding:10px 12px;
      border-radius:999px;
      background:linear-gradient(135deg, rgba(255,255,255,.10), rgba(255,255,255,.05));
      border:1px solid rgba(255,255,255,.12);
      backdrop-filter: blur(10px);
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
      font-size:14px;
      color:var(--muted);
      user-select:none;
      white-space:nowrap;
    }
    .dot{
      width:10px;height:10px;border-radius:99px;
      background: radial-gradient(circle at 30% 30%, #fff, rgba(255,255,255,.2));
      box-shadow: 0 0 12px rgba(255,255,255,.4);
    }

    .hero{
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap:16px;
      align-items:stretch;
      margin-top:10px;
    }
    @media (max-width: 920px){
      .hero{grid-template-columns:1fr}
    }

    .card{
      background: linear-gradient(135deg, rgba(255,255,255,.11), rgba(255,255,255,.06));
      border:1px solid rgba(255,255,255,.14);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      backdrop-filter: blur(14px);
      overflow:hidden;
      position:relative;
    }

    .card .inner{padding:22px}
    .title{
      font-size: clamp(28px, 4vw, 44px);
      line-height:1.05;
      margin:0 0 10px;
      letter-spacing:.2px;
    }
    .subtitle{
      margin:0 0 18px;
      color:var(--muted);
      font-size:16px;
      line-height:1.45;
    }

    .gradtext{
      background: linear-gradient(90deg, var(--accent1), var(--accent2), var(--accent3));
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
      filter: drop-shadow(0 12px 24px rgba(255,79,216,.12));
    }

    .actions{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      margin-top:6px;
    }
    button, .btn{
      appearance:none;
      border:0;
      cursor:pointer;
      padding:12px 14px;
      border-radius:14px;
      font-weight:800;
      font-size:14px;
      color:rgba(255,255,255,.92);
      background: rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.16);
      backdrop-filter: blur(10px);
      transition: transform .12s ease, background .12s ease, border-color .12s ease, box-shadow .12s ease;
      user-select:none;
    }
    button:hover, .btn:hover{transform: translateY(-1px); background: rgba(255,255,255,.11)}
    button:active, .btn:active{transform: translateY(0px); background: rgba(255,255,255,.09)}
    .btn-primary{
      background: linear-gradient(135deg, rgba(255,79,216,.28), rgba(124,92,255,.22));
      border-color: rgba(255,255,255,.22);
      box-shadow: 0 16px 40px rgba(124,92,255,.22);
    }
    .btn-wow{
      background: linear-gradient(135deg, rgba(50,255,215,.22), rgba(255,79,216,.22));
      border-color: rgba(255,255,255,.26);
      box-shadow: 0 18px 55px rgba(50,255,215,.16);
    }

    .badgeRow{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      margin-top:14px;
    }
    .badge{
      padding:10px 12px;
      border-radius:999px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.12);
      color:rgba(255,255,255,.78);
      font-size:13px;
    }

    .right{
      display:grid;
      grid-template-rows:auto 1fr;
      gap:16px;
    }

    .countdown{
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap:10px;
      padding:18px;
    }
    .timeBox{
      text-align:center;
      padding:14px 10px;
      border-radius:18px;
      background: rgba(0,0,0,.20);
      border:1px solid rgba(255,255,255,.14);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.10);
    }
    .num{
      font-size: clamp(22px, 3vw, 34px);
      font-weight:950;
      letter-spacing:.6px;
    }
    .lbl{
      margin-top:4px;
      font-size:12px;
      color:var(--muted);
      text-transform:uppercase;
      letter-spacing:1.2px;
    }
    .smallNote{
      padding:0 18px 18px;
      color:var(--muted);
      font-size:13px;
    }

    .grid{
      margin-top:16px;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:16px;
    }
    @media (max-width: 920px){
      .grid{grid-template-columns:1fr}
    }

    .sectionTitle{
      margin:0 0 10px;
      font-size:18px;
      letter-spacing:.2px;
    }
    .list{
      margin:0;
      padding:0;
      list-style:none;
      display:grid;
      gap:10px;
    }
    .li{
      padding:12px 12px;
      border-radius:16px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.12);
      color:rgba(255,255,255,.86);
      display:flex;
      gap:10px;
      align-items:flex-start;
    }
    .spark{
      width:10px;height:10px;border-radius:99px;
      margin-top:5px;
      background: linear-gradient(135deg, var(--accent1), var(--accent2));
      box-shadow: 0 0 16px rgba(255,79,216,.30);
      flex: 0 0 auto;
    }

    .quote{
      margin:0;
      font-size:16px;
      line-height:1.55;
      color: rgba(255,255,255,.86);
    }
    .sig{
      margin-top:12px;
      color: var(--muted);
      font-size:13px;
    }

    .footer{
      margin-top:18px;
      text-align:center;
      color: rgba(255,255,255,.62);
      font-size:13px;
    }

    .ribbon{
      position:absolute;
      inset:auto -120px 20px auto;
      transform: rotate(12deg);
      padding:10px 140px;
      background: linear-gradient(90deg, rgba(255,79,216,.28), rgba(124,92,255,.20), rgba(50,255,215,.18));
      border:1px solid rgba(255,255,255,.18);
      box-shadow: 0 18px 60px rgba(0,0,0,.35);
      color: rgba(255,255,255,.82);
      font-weight:900;
      letter-spacing:.8px;
      text-transform:uppercase;
      font-size:12px;
      user-select:none;
    }

    .toast{
      position:fixed;
      left:50%;
      bottom:22px;
      transform: translateX(-50%);
      background: rgba(0,0,0,.55);
      border:1px solid rgba(255,255,255,.18);
      border-radius:14px;
      padding:10px 12px;
      color: rgba(255,255,255,.85);
      font-size:13px;
      backdrop-filter: blur(12px);
      box-shadow: 0 16px 55px rgba(0,0,0,.45);
      opacity:0;
      pointer-events:none;
      transition: opacity .18s ease, transform .18s ease;
      z-index:30;
      max-width:min(560px, calc(100% - 24px));
    }
    .toast.show{
      opacity:1;
      transform: translateX(-50%) translateY(-2px);
    }

    .blob{
      position:absolute;
      width:360px;height:360px;
      border-radius:999px;
      filter: blur(32px);
      opacity:.22;
      mix-blend-mode: screen;
      animation: float 10s ease-in-out infinite;
    }
    .b1{background: radial-gradient(circle at 30% 30%, var(--accent1), transparent 60%); top:-120px; left:-120px}
    .b2{background: radial-gradient(circle at 30% 30%, var(--accent2), transparent 60%); bottom:-160px; right:-140px; animation-delay:-3s}
    .b3{background: radial-gradient(circle at 30% 30%, var(--accent3), transparent 60%); top:40%; left:70%; width:280px;height:280px; animation-delay:-6s}
    @keyframes float{
      0%,100%{transform: translate(0,0) scale(1)}
      50%{transform: translate(18px,-14px) scale(1.03)}
    }

    .overlay{
      position:fixed;
      inset:0;
      z-index:20;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:18px;
      background:
        radial-gradient(800px 600px at 25% 20%, rgba(255,79,216,.22), transparent 60%),
        radial-gradient(700px 550px at 80% 30%, rgba(124,92,255,.22), transparent 60%),
        radial-gradient(800px 600px at 50% 85%, rgba(50,255,215,.18), transparent 60%),
        rgba(0,0,0,.55);
      backdrop-filter: blur(10px);
      transition: opacity .35s ease, transform .35s ease;
    }
    .overlay.hide{
      opacity:0;
      pointer-events:none;
      transform: scale(1.02);
    }
    .overlayCard{
      width:min(820px, 100%);
      border-radius: 26px;
      border:1px solid rgba(255,255,255,.18);
      background: linear-gradient(135deg, rgba(255,255,255,.12), rgba(255,255,255,.06));
      box-shadow: 0 30px 90px rgba(0,0,0,.55);
      overflow:hidden;
      position:relative;
    }
    .overlayInner{
      padding:26px 22px 22px;
      position:relative;
    }
    .pulseRing{
      position:absolute;
      inset:-120px;
      background: radial-gradient(circle at 50% 50%, rgba(255,255,255,.18), transparent 60%);
      animation: ring 2.2s ease-in-out infinite;
      opacity:.7;
    }
    @keyframes ring{
      0%{transform: scale(.92); opacity:.35}
      50%{transform: scale(1.02); opacity:.8}
      100%{transform: scale(.92); opacity:.35}
    }
    .wowTitle{
      margin:0 0 10px;
      font-size: clamp(34px, 6vw, 62px);
      line-height:1.02;
      letter-spacing:.3px;
      text-align:center;
    }
    .wowSub{
      margin:0 0 18px;
      text-align:center;
      color: rgba(255,255,255,.80);
      font-size:16px;
      line-height:1.5;
    }
    .hintRow{
      display:flex;
      gap:10px;
      justify-content:center;
      flex-wrap:wrap;
      margin-top:10px;
    }
    .tiny{
      font-size:13px;
      color: rgba(255,255,255,.72);
      text-align:center;
      margin-top:10px;
    }

    .shake{animation: shake .6s ease-in-out 1;}
    @keyframes shake{
      0%,100%{transform: translateX(0)}
      20%{transform: translateX(-6px)}
      40%{transform: translateX(6px)}
      60%{transform: translateX(-4px)}
      80%{transform: translateX(4px)}
    }

    .photoHeader{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
      margin-bottom:12px;
    }
    .photoMeta{
      color: var(--muted);
      font-size:13px;
      line-height:1.4;
      margin-top:2px;
      max-width: 60ch;
    }
    .masonry{
      column-count: 3;
      column-gap: 12px;
      padding: 0 22px 22px;
    }
    @media (max-width: 980px){ .masonry{column-count:2} }
    @media (max-width: 560px){ .masonry{column-count:1} }

    figure.shot{
      margin: 0 0 12px;
      break-inside: avoid;
      border-radius: 20px;
      overflow:hidden;
      position:relative;
      background: rgba(0,0,0,.18);
      border:1px solid rgba(255,255,255,.14);
      box-shadow: 0 16px 50px rgba(0,0,0,.30);
      transform: translateY(10px);
      opacity: 0;
      transition: transform .45s ease, opacity .45s ease, box-shadow .2s ease;
      cursor: pointer;
    }
    figure.shot.in{
      transform: translateY(0px);
      opacity: 1;
    }
    figure.shot:hover{
      box-shadow: 0 22px 70px rgba(0,0,0,.40);
    }
    figure.shot::after{
      content:"";
      position:absolute;
      inset:0;
      background:
        radial-gradient(500px 220px at 20% 10%, rgba(255,79,216,.18), transparent 60%),
        radial-gradient(450px 220px at 80% 0%, rgba(50,255,215,.14), transparent 60%),
        linear-gradient(180deg, transparent 60%, rgba(0,0,0,.40));
      opacity:.9;
      pointer-events:none;
    }

    figure.shot img{
      width:100%;
      display:block;
      transform: scale(1.02);
      filter: blur(14px) saturate(1.15) contrast(1.05);
      transition: filter .35s ease, transform .35s ease;
      aspect-ratio: auto;
    }
    figure.shot img.loaded{
      filter: blur(0px) saturate(1.05) contrast(1.02);
      transform: scale(1);
    }
    figure.shot:hover img.loaded{
      transform: scale(1.02);
    }

    figcaption.cap{
      position:absolute;
      left:12px;
      right:12px;
      bottom:10px;
      z-index:2;
      font-size:13px;
      color: rgba(255,255,255,.86);
      text-shadow: 0 10px 30px rgba(0,0,0,.55);
      line-height:1.25;
    }

    .lightbox{
      position:fixed;
      inset:0;
      z-index:25;
      display:none;
      align-items:center;
      justify-content:center;
      padding:14px;
      background: rgba(0,0,0,.72);
      backdrop-filter: blur(10px);
    }
    .lightbox.show{display:flex;}
    .lbCard{
      width: min(980px, 100%);
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,.18);
      background: linear-gradient(135deg, rgba(255,255,255,.12), rgba(255,255,255,.06));
      box-shadow: 0 30px 90px rgba(0,0,0,.60);
      overflow:hidden;
      position:relative;
    }
    .lbTop{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      padding:12px 12px 0;
    }
    .lbCount{
      color: rgba(255,255,255,.74);
      font-size:13px;
      padding:10px 10px;
      border-radius: 12px;
      background: rgba(0,0,0,.25);
      border: 1px solid rgba(255,255,255,.14);
    }
    .lbBtns{display:flex; gap:8px; flex-wrap:wrap}
    .lbImgWrap{
      padding:12px;
    }
    .lbImg{
      width:100%;
      max-height: 72vh;
      object-fit: contain;
      display:block;
      border-radius: 18px;
      background: rgba(0,0,0,.20);
      border: 1px solid rgba(255,255,255,.12);
    }
    .lbCap{
      padding:0 14px 14px;
      color: rgba(255,255,255,.84);
      font-size:14px;
      line-height:1.4;
    }
    .lbHint{
      color: rgba(255,255,255,.60);
      font-size:12px;
      padding: 0 14px 14px;
    }

    @media (prefers-reduced-motion: reduce){
      *{animation:none !important; transition:none !important}
    }

    .extrasGrid{
      margin-top:16px;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:16px;
    }
    @media (max-width: 920px){
      .extrasGrid{grid-template-columns:1fr}
    }

    .fieldRow{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      margin-top:10px;
    }
    .input{
      flex: 1 1 220px;
      min-width: 180px;
      padding:12px 12px;
      border-radius:14px;
      background: rgba(0,0,0,.22);
      border:1px solid rgba(255,255,255,.16);
      color: rgba(255,255,255,.90);
      outline:none;
    }
    .input:focus{
      border-color: rgba(255,255,255,.26);
      box-shadow: 0 0 0 3px rgba(124,92,255,.12);
    }

    .details{
      padding:12px 12px;
      border-radius:16px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.12);
    }
    .details summary{
      cursor:pointer;
      font-weight:800;
      color: rgba(255,255,255,.90);
    }
    .details p{
      margin:10px 0 0;
      color: rgba(255,255,255,.82);
      line-height:1.5;
    }
    .details img{
      width:100%;
      margin-top:10px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.18);
    }

    .gameBox{
      position:relative;
      border-radius:18px;
      background: rgba(0,0,0,.20);
      border:1px solid rgba(255,255,255,.14);
      overflow:hidden;
      min-height: 240px;
    }
    .gameTop{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      padding:12px;
    }
    .gameScore{
      padding:10px 10px;
      border-radius: 12px;
      background: rgba(0,0,0,.25);
      border: 1px solid rgba(255,255,255,.14);
      color: rgba(255,255,255,.84);
      font-size:13px;
    }
    .gameArea{
      position:relative;
      height: 260px;
    }
    .heart{
      position:absolute;
      top:-40px;
      user-select:none;
      cursor:pointer;
      filter: drop-shadow(0 10px 24px rgba(0,0,0,.45));
      animation-name: fall;
      animation-timing-function: linear;
      animation-fill-mode: forwards;
      will-change: transform, opacity;
    }
    @keyframes fall{
      0%{transform: translateY(0) scale(1); opacity: 0}
      10%{opacity: 1}
      100%{transform: translateY(340px) scale(1.05); opacity: 0}
    }

    .reward{
      display:none;
      margin-top:10px;
      padding:12px 12px;
      border-radius:16px;
      background: linear-gradient(135deg, rgba(255,79,216,.18), rgba(50,255,215,.14));
      border:1px solid rgba(255,255,255,.16);
      color: rgba(255,255,255,.88);
    }

    .overlayFinale{
      position:fixed;
      inset:0;
      z-index:40;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:18px;
      background:
        radial-gradient(900px 700px at 20% 10%, rgba(255,79,216,.24), transparent 60%),
        radial-gradient(900px 700px at 80% 20%, rgba(124,92,255,.24), transparent 60%),
        radial-gradient(900px 700px at 50% 90%, rgba(50,255,215,.18), transparent 60%),
        rgba(0,0,0,.62);
      backdrop-filter: blur(12px);
      opacity:0;
      pointer-events:none;
      transform: scale(1.02);
      transition: opacity .25s ease, transform .25s ease;
    }
    .overlayFinale.show{
      opacity:1;
      pointer-events:auto;
      transform: scale(1);
    }
  </style>
</head>
<body>
  <div class="stars">
    <canvas id="stars"></canvas>
  </div>

  <canvas id="confetti"></canvas>
  <canvas id="fx"></canvas>

  <div class="overlay" id="overlay">
    <div class="overlayCard" id="overlayCard">
      <div class="pulseRing"></div>
      <div class="overlayInner">
        <h1 class="wowTitle"><span class="gradtext">Surprise</span> ‚ú®</h1>
        <p class="wowSub" id="wowSub">–ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É –∏ –æ—Ç–∫—Ä–æ–π –ø–æ–¥–∞—Ä–æ–∫. –¢—É—Ç –±—É–¥–µ—Ç –º–Ω–æ–≥–æ –±–ª—ë—Å—Ç–æ–∫ –∏ –Ω–µ–º–Ω–æ–≥–æ –º–∞–≥–∏–∏.</p>
        <div class="hintRow">
          <button class="btn-primary btn-wow" id="btnOpen">–û—Ç–∫—Ä—ã—Ç—å —Å—é—Ä–ø—Ä–∏–∑</button>
          <button id="btnMini">–°–¥–µ–ª–∞—Ç—å –≤–∞—É</button>
        </div>
        <div class="tiny">–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, –¥–æ–±–∞–≤—å –º—É–∑—ã–∫—É. –ö–Ω–æ–ø–∫–∞ –µ—Å—Ç—å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ.</div>
      </div>
    </div>
  </div>

  <div class="wrap">
    <div class="topbar">
      <div class="chip"><span class="dot"></span><span id="topLine">–ó–∞–≥—Ä—É–∑–∫–∞...</span></div>
      <div class="chip"><span>–ñ–º–∏ –∫–Ω–æ–ø–∫–∏</span></div>
    </div>

    <section class="hero">
      <div class="card">
        <div class="ribbon" id="ribbon">17 —è–Ω–≤–∞—Ä—è</div>
        <div class="blob b1"></div><div class="blob b2"></div><div class="blob b3"></div>
        <div class="inner">
          <h1 class="title">
            Happy Birthday, <span class="gradtext" id="name">–õ—é–±–∏–º–∞—è</span> ‚ú®
          </h1>
          <p class="subtitle" id="sub">–ú–∞–ª–µ–Ω—å–∫–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ –ª—é–±–æ–≤—å, –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è –∏ —Ç–≤–æ—é –∫—Ä–∞—Å–æ—Ç—É.</p>

          <div class="actions">
            <button class="btn-primary" id="btnConfetti">–ó–∞—Å—ã–ø–∞—Ç—å –∫–æ–Ω—Ñ–µ—Ç—Ç–∏</button>
            <button id="btnFireworks">–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∞–ª—é—Ç</button>
            <button id="btnWish">–û—Ç–∫—Ä—ã—Ç—å –ø–æ–∂–µ–ª–∞–Ω–∏–µ</button>
            <button id="btnCopy">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ</button>
            <button id="btnMusic">–ú—É–∑—ã–∫–∞</button>
          </div>

          <div class="badgeRow" id="badges"></div>
        </div>
      </div>

      <div class="right">
        <div class="card">
          <div class="countdown" aria-label="countdown">
            <div class="timeBox"><div class="num" id="dd">0</div><div class="lbl">–î–Ω–µ–π</div></div>
            <div class="timeBox"><div class="num" id="hh">00</div><div class="lbl">–ß–∞—Å–æ–≤</div></div>
            <div class="timeBox"><div class="num" id="mm">00</div><div class="lbl">–ú–∏–Ω—É—Ç</div></div>
            <div class="timeBox"><div class="num" id="ss">00</div><div class="lbl">–°–µ–∫—É–Ω–¥</div></div>
          </div>
          <div class="smallNote" id="countNote">–û—Ç—Å—á—ë—Ç –¥–æ —Ç–≤–æ–µ–≥–æ –¥–Ω—è.</div>
        </div>

        <div class="card">
          <div class="inner">
            <h3 class="sectionTitle">–ú–∞–ª–µ–Ω—å–∫–∏–µ –æ–±–µ—â–∞–Ω–∏—è –Ω–∞ —ç—Ç–æ—Ç –≥–æ–¥</h3>
            <ul class="list" id="promises"></ul>
          </div>
        </div>
      </div>
    </section>

    <section class="grid">
      <div class="card">
        <div class="inner">
          <h3 class="sectionTitle">–ß—Ç–æ —è –≤ —Ç–µ–±–µ –ª—é–±–ª—é</h3>
          <ul class="list" id="about"></ul>
        </div>
      </div>

      <div class="card">
        <div class="inner">
          <h3 class="sectionTitle">–û–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞–≤—Å–µ–≥–¥–∞</h3>
          <p class="quote" id="bigWish"></p>
          <div class="sig" id="sig"></div>
        </div>
      </div>
    </section>

    <section class="grid" style="grid-template-columns:1fr; margin-top:16px;">
      <div class="card">
        <div class="inner">
          <div class="photoHeader">
            <div>
              <h3 class="sectionTitle">–ù–∞—à–∏ —Ñ–æ—Ç–æ –º–æ–º–µ–Ω—Ç—ã</h3>
              <div class="photoMeta" id="photoMeta">–õ–∏—Å—Ç–∞–π –≤–Ω–∏–∑, –æ—Ç–∫—Ä—ã–≤–∞–π —Ñ–æ—Ç–æ, —Å–≤–∞–π–ø–∞–π –≤–ª–µ–≤–æ –∏ –≤–ø—Ä–∞–≤–æ.</div>
            </div>
            <div class="actions" style="margin:0">
              <button class="btn-primary" id="btnSlideshow">–°–ª–∞–π–¥—à–æ—É</button>
              <button id="btnShuffle">–ü–µ—Ä–µ–º–µ—à–∞—Ç—å</button>
              <button id="btnBurst">–ë–æ–ª—å—à–µ –±–ª—ë—Å—Ç–æ–∫</button>
            </div>
          </div>
        </div>
        <div class="masonry" id="gallery"></div>
      </div>
    </section>

    <section class="extrasGrid" id="extras">
      <div class="card">
        <div class="inner">
          <h3 class="sectionTitle">–°–µ–∫—Ä–µ—Ç–Ω–∞—è –∫–æ—Ä–æ–±–∫–∞</h3>
          <p class="subtitle" style="margin:0">–í–≤–µ–¥–∏ –∫–æ–¥. –ú–æ–∂–Ω–æ —Å–ª–æ–≤–æ –∏–ª–∏ —Ü–∏—Ñ—Ä—ã.</p>
          <div class="fieldRow">
            <input class="input" id="secretInput" placeholder="–ö–æ–¥" />
            <button class="btn-primary"	bt id="btnSecret">–û—Ç–∫—Ä—ã—Ç—å</button>
          </div>
          <div class="reward" id="secretReward"></div>
        </div>
      </div>

      <div class="card">
        <div class="inner">
          <h3 class="sectionTitle">–ö–∞—Ä—Ç–∞ –Ω–∞—à–µ–π –∏—Å—Ç–æ—Ä–∏–∏</h3>
          <p class="subtitle" style="margin:0">–¢–∞–π–º–ª–∞–π–Ω. –û—Ç–∫—Ä—ã–≤–∞–π –ø—É–Ω–∫—Ç—ã.</p>
          <div id="timeline"></div>
        </div>
      </div>

      <div class="card" style="grid-column: 1 / -1;">
        <div class="inner">
          <h3 class="sectionTitle">–õ–æ–≤–∏–ª–∫–∞ —Å–µ—Ä–¥–µ—á–µ–∫</h3>
          <p class="subtitle" style="margin:0">20 —Å–µ–∫—É–Ω–¥. –ü–æ–π–º–∞–π –Ω—É–∂–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –Ω–∞–≥—Ä–∞–¥–∞.</p>
          <div class="gameBox">
            <div class="gameTop">
              <div class="gameScore" id="gameScore">–°—á—ë—Ç: 0</div>
              <div class="actions" style="margin:0">
                <button class="btn-primary" id="btnGameStart">–°—Ç–∞—Ä—Ç</button>
                <button id="btnGameStop">–°—Ç–æ–ø</button>
                <button id="btnFinale">–§–∏–Ω–∞–ª—å–Ω—ã–π –≤–∞—É</button>
              </div>
            </div>
            <div class="gameArea" id="gameArea"></div>
          </div>
          <div class="reward" id="gameReward"></div>
        </div>
      </div>
    </section>

    <div class="overlayFinale" id="finaleOverlay">
      <div class="overlayCard" id="finaleCard">
        <div class="pulseRing"></div>
        <div class="overlayInner">
          <h1 class="wowTitle"><span class="gradtext">Happy Birthday</span> ‚ú®</h1>
          <p class="wowSub" id="finaleText">–¢—ã –º–æ–π —Å–∞–º—ã–π –∫—Ä–∞—Å–∏–≤—ã–π –≤—ã–±–æ—Ä. –°–µ–≥–æ–¥–Ω—è —Ç–≤–æ–π –¥–µ–Ω—å.</p>
          <div class="hintRow">
            <button class="btn-primary btn-wow" id="finaleAgain">–ï—â—ë —Ä–∞–∑ –≤–∞—É</button>
            <button id="finaleClose">–ó–∞–∫—Ä—ã—Ç—å</button>
          </div>
          <div class="tiny">–ñ–º–∏ –µ—â—ë —Ä–∞–∑ –≤–∞—É, –µ—Å–ª–∏ —Ö–æ—á–µ—Ç—Å—è —Å–∞–ª—é—Ç–æ–≤ –±–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏.</div>
        </div>
      </div>
    </div>

    <div class="footer" id="footerLine"></div>
  </div>

  <div class="toast" id="toast">–û–∫</div>

  <div class="lightbox" id="lightbox" aria-hidden="true">
    <div class="lbCard">
      <div class="lbTop">
        <div class="lbCount" id="lbCount">1 –∏–∑ 1</div>
        <div class="lbBtns">
          <button id="lbPrev">–ù–∞–∑–∞–¥</button>
          <button id="lbNext">–í–ø–µ—Ä—ë–¥</button>
          <button class="btn-primary" id="lbPlay">–ê–≤—Ç–æ</button>
          <button id="lbClose">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
      </div>
      <div class="lbImgWrap">
        <img class="lbImg" id="lbImg" alt="" />
      </div>
      <div class="lbCap" id="lbCap"></div>
      <div class="lbHint">–ö–ª–∞–≤–∏—à–∏, —Å–≤–∞–π–ø—ã, –∏–ª–∏ –∫–Ω–æ–ø–∫–∏ —Å–≤–µ—Ä—Ö—É.</div>
    </div>
  </div>

  <audio id="audio" preload="none">
    <source src="mp3.mp3" type="audio/mpeg">
  </audio>

  <script>
    /* ===========================
       –ù–ê–°–¢–†–û–ô–ö–ò
    ============================ */
    const birthdayDateISO = "2026-01-17T00:00:00";
    const birthdayPersonName = "–¢–≤–æ—è –õ—é–±–∏–º–∞—è";
    const fromName = "–ñ—É–º–∞–∏–¥–∞";

    const thingsSheLoves = [
      "–•–æ–ª–æ–¥–Ω—ã–π –∫–≤–∞—Å",
      "–ù–æ—á–Ω—ã–µ –ø—Ä–æ–≥—É–ª–∫–∏",
      "–ú—É–∑—ã–∫—É, –æ—Ç –∫–æ—Ç–æ—Ä–æ–π –º—É—Ä–∞—à–∫–∏",
      "–°–º–µ—Ö –¥–æ —Å–ª—ë–∑",
      "–ú–∞–ª–µ–Ω—å–∫–∏–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è",
      "–£—é—Ç–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã",
      "–¢–≤–æ–∏ –æ–±—ä—è—Ç–∏—è",
      "–ö—Ä–∞—Å–∏–≤—ã–µ –∑–∞–∫–∞—Ç—ã",
      "–°–ø–æ–Ω—Ç–∞–Ω–Ω—ã–µ –ø–ª–∞–Ω—ã",
      "–ó–∞–∫—É–ø–∞—Ç—å—Å—è —Å–ª–∞–¥–∞—Å—Ç—å—è–º–∏ –∏ —Å–∏–¥–µ—Ç –≤ —á–∞—Ç —Ä—É–ª–µ—Ç–∫–µ"
    ];

    const aboutHer = [
      "–° —Ç–æ–±–æ–π —Ä—è–¥–æ–º —Å–ø–æ–∫–æ–π–Ω–æ, –∫–∞–∫ –¥–æ–º–∞.",
      "–¢—ã —É–º–µ–µ—à—å –¥–µ–ª–∞—Ç—å –¥–µ–Ω—å –ª–µ–≥—á–µ –æ–¥–Ω–∏–º –≤–∑–≥–ª—è–¥–æ–º.",
      "–¢—ã –æ—á–µ–Ω—å —Å–∏–ª—å–Ω–∞—è, –¥–∞–∂–µ –∫–æ–≥–¥–∞ –º–æ–ª—á–∏—à—å –æ–± —ç—Ç–æ–º.",
      "–¢—ã –ø—Ä–µ–≤—Ä–∞—â–∞–µ—à—å –æ–±—ã—á–Ω—ã–µ –¥–Ω–∏ –≤ –∏—Å—Ç–æ—Ä–∏—é.",
      "–¢—ã –∑–∞—Å–ª—É–∂–∏–≤–∞–µ—à—å –ª—é–±–≤–∏ –±–µ–∑ —É—Å–ª–æ–≤–∏–π."
    ];

    const promises = [
      "–ë–æ–ª—å—à–µ –Ω–æ—á–Ω—ã—Ö –ø–µ—Ä–µ–ø–∏—Å–æ–∫",
      "–ë–æ–ª—å—à–µ —á–µ—Å—Ç–Ω—ã—Ö —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤",
      "–ë–æ–ª—å—à–µ —Å–ø–æ–Ω—Ç–∞–Ω–Ω—ã—Ö –ø–ª–∞–Ω–æ–≤",
      "–ë–æ–ª—å—à–µ —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏—è, –º–µ–Ω—å—à–µ —Å–ø–µ—à–∫–∏",
      "–ë–æ–ª—å—à–µ –ø–æ–±–µ–¥, –±–æ–ª—å—à–∏—Ö –∏ –º–∞–ª–µ–Ω—å–∫–∏—Ö"
    ];

    const wishes = [
      "–ü—É—Å—Ç—å —ç—Ç–æ—Ç –≥–æ–¥ –ø—Ä–∏–Ω–µ—Å—ë—Ç —Ç–µ–±–µ —ç–Ω–µ—Ä–≥–∏—é, —è—Å–Ω–æ—Å—Ç—å –∏ –º–æ–º–µ–Ω—Ç—ã, –æ—Ç –∫–æ—Ç–æ—Ä—ã—Ö —Å–≤–µ—Ç–ª–æ –≤–Ω—É—Ç—Ä–∏.",
      "–ñ–µ–ª–∞—é —Ç–µ–±–µ –ª—é–±–≤–∏, –≥—Ä–æ–º–∫–æ–≥–æ —Å–º–µ—Ö–∞ –∏ —Ç–∏—Ö–æ–≥–æ —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏—è.",
      "–ü—É—Å—Ç—å —Ä—è–¥–æ–º –±—É–¥—É—Ç —Ö–æ—Ä–æ—à–∏–µ –ª—é–¥–∏ –∏ —Å—á–∞—Å—Ç–ª–∏–≤—ã–µ —Å–ª—É—á–∞–π–Ω–æ—Å—Ç–∏.",
      "–ü—É—Å—Ç—å –≤—Å—ë, —á–µ–≥–æ —Ç—ã —Ö–æ—á–µ—à—å, —Å—Ç–∞–Ω–µ—Ç –±–ª–∏–∂–µ, –∞ –≤—Å—ë –Ω—É–∂–Ω–æ–µ –Ω–∞–π–¥—ë—Ç —Ç–µ–±—è.",
      "–ó–¥–æ—Ä–æ–≤—å—è, —Ä–∞–¥–æ—Å—Ç–∏ –∏ —á—Ç–æ–±—ã –æ–¥–Ω–∞ –º–µ—á—Ç–∞ –Ω–∞–∫–æ–Ω–µ—Ü —Å—Ç–∞–ª–∞ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å—é."
    ];

    const bigWishText =
      "–í —Ç–≤–æ–π –¥–µ–Ω—å —è —Ö–æ—á—É, —á—Ç–æ–±—ã —Ç—ã –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–ª–∞, –∫–∞–∫ —Å–∏–ª—å–Ω–æ —Ç–µ–±—è –ª—é–±—è—Ç. " +
      "–Ø –≥–æ—Ä–∂—É—Å—å —Ç–æ–±–æ–π, –≤–µ—Ä—é –≤ —Ç–µ–±—è –∏ –æ—á–µ–Ω—å –∂–¥—É –≤—Å—ë, —á—Ç–æ –≤–ø–µ—Ä–µ–¥–∏. " +
      "–î–∞–≤–∞–π —Å–¥–µ–ª–∞–µ–º —ç—Ç–æ—Ç –≥–æ–¥ –∫—Ä–∞—Å–∏–≤—ã–º.";

    /* ===========================
       –§–û–¢–û
    ============================ */
    let photos = [
      { src: "—Ñ–æ—Ç–æ1.jpg", cap: "–Ø —Ä–∞–¥–∞, —á—Ç–æ –Ω–∞—à–ª–∞ —Ç–∞–∫—É—é –ø–æ–¥—Ä—É–≥—É –∫–∞–∫ —Ç—ã" },
      { src: "—Ñ–æ—Ç–æ2.jpg", cap: "–¢—ã - –º–æ—è –∑–∞—èüíû. –Ø –≤—Å–µ–≥–¥–∞ –ø–æ–¥–¥–µ—Ä–∂—É —Ç–µ–±—è –∏ –±—É–¥—É –ø–æ–º–æ–≥–∞—Ç—å –≤–æ –≤—Å–µ—Ö —Ç–≤–æ–∏—Ö –∂–µ–ª–∞–Ω–∏—è—Ö.‚ú®" },
      { src: "—Ñ–æ—Ç–æ3.jpg", cap: "–ü–æ–º–Ω—é –Ω–∞—à–∏ –≤–µ—á–µ—Ä–Ω–∏–µ –ø—Ä–æ–≥—É–ª–∫–∏" },
      { src: "—Ñ–æ—Ç–æ4.jpg", cap: "–¢—ã –∫—Ä–∞—Å–∏–≤–∞—è –≤—Å–µ–≥–¥–∞" },
      { src: "—Ñ–æ—Ç–æ5.jpg", cap: "–ú–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è –≤—Å–µ —Ç–≤–æ–∏ –ø—Ä–∞–π–º—ã" },
      { src: "—Ñ–æ—Ç–æ6.jpg", cap: "–Ø –æ—á–µ–Ω—å –±–ª–∞–≥–æ–¥–∞—Ä–Ω–∞ –≤—Å–µ–ª–µ–Ω–Ω–æ–π –∑–∞ —Ç–æ —á—Ç–æ –ø–æ–¥–∞—Ä–∏–ª –º–Ω–µ —Ç–µ–±—è üíã" }
    ];

    /* ===========================
       EXTRAS –ù–ê–°–¢–†–û–ô–ö–ò
    ============================ */
    const secretEntries = [
      { code: "–ö–∏—Å—É–Ω—å", text: "–Ø —Ç—è –ª—é–±–ª—é –Ω–µ —Å–º–æ—Ç—Ä—è –Ω–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ‚ú®" },
      { code: "–ß–∏–Ω–æ", text: "–Ø —Å–∫—É—á–∞—é –ø–æ –ø—Ä–æ–≥—É–ª–∫–∞–º —Å –≤–∞–º–∏)" },
      { code: "–ó–∞—è", text: " —Ç–æ–±–æ—é –æ—á–µ–Ω—å –¥–æ—Ä–æ–∂—Éüíã‚ú®" },
    ];

    const finaleTextDefault = "–¢—ã –º–æ–π —Å–∞–º—ã–π –∫—Ä–∞—Å–∏–≤—ã–π –≤—ã–±–æ—Ä. –°–µ–≥–æ–¥–Ω—è —Ç–≤–æ–π –¥–µ–Ω—å, –∏ —è —Ä—è–¥–æ–º.";

    /* ===========================
       –£–¢–ò–õ–ò–¢–´
    ============================ */
    const el = (id) => document.getElementById(id);
    const qsa = (sel) => Array.from(document.querySelectorAll(sel));
    const pad2 = (n) => String(n).padStart(2, "0");
    const rand = (a, b) => a + Math.random() * (b - a);
    const pick = (arr) => arr[Math.floor(Math.random() * arr.length)];
    const safeText = (id, text) => { const e = el(id); if (e) e.textContent = text; };
    const on = (id, evt, fn, opts) => { const e = el(id); if (e) e.addEventListener(evt, fn, opts); return e; };

    /* ===========================
       –ë–ê–ó–û–í–ê–Ø –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø
    ============================ */
    safeText("name", birthdayPersonName);
    safeText("sig", "–° –ª—é–±–æ–≤—å—é, " + fromName);
    safeText("bigWish", bigWishText);

    const ribbon = el("ribbon");
    if (ribbon) ribbon.textContent = new Date(birthdayDateISO).toLocaleDateString("ru-RU", { month: "long", day: "numeric" });

    safeText("topLine", "–°–¥–µ–ª–∞–Ω–æ –¥–ª—è " + birthdayPersonName);
    safeText("footerLine", "–ñ–º–∏ –≤–∞—É, –∫–æ–≥–¥–∞ —Å–µ—Ä–¥—Ü–µ –ø—Ä–æ—Å–∏—Ç. ‚ú®");

    const badges = el("badges");
    if (badges) {
      badges.innerHTML = "";
      thingsSheLoves.slice(0, 12).forEach(t => {
        const b = document.createElement("div");
        b.className = "badge";
        b.textContent = "–û–Ω–∞ –ª—é–±–∏—Ç " + t;
        badges.appendChild(b);
      });
    }

    const aboutList = el("about");
    if (aboutList) {
      aboutList.innerHTML = "";
      aboutHer.forEach(t => {
        const li = document.createElement("li");
        li.className = "li";
        li.innerHTML = '<span class="spark"></span><span>' + t + "</span>";
        aboutList.appendChild(li);
      });
    }

    const promList = el("promises");
    if (promList) {
      promList.innerHTML = "";
      promises.forEach(t => {
        const li = document.createElement("li");
        li.className = "li";
        li.innerHTML = '<span class="spark"></span><span>' + t + "</span>";
        promList.appendChild(li);
      });
    }

    /* ===========================
       COUNTDOWN
    ============================ */
    const target = new Date(birthdayDateISO);

    function updateCountdown() {
      const dd = el("dd"), hh = el("hh"), mm = el("mm"), ss = el("ss");
      const note = el("countNote");
      const sub = el("sub");

      if (!dd || !hh || !mm || !ss || !note) return;

      const now = new Date();
      let diff = target - now;

      if (diff <= 0) {
        dd.textContent = "0";
        hh.textContent = "00";
        mm.textContent = "00";
        ss.textContent = "00";
        note.textContent = "–≠—Ç–æ —Å–µ–≥–æ–¥–Ω—è. –° –¥–Ω—ë–º —Ä–æ–∂–¥–µ–Ω–∏—è! üéâ";
        if (sub) sub.textContent = "–°–µ–≥–æ–¥–Ω—è —Ç–≤–æ–π –¥–µ–Ω—å. –õ—é–±–æ–≤—å –±–µ–∑ –ª–∏–º–∏—Ç–æ–≤.";
        return;
      }

      const s = Math.floor(diff / 1000);
      const days = Math.floor(s / 86400);
      const hours = Math.floor((s % 86400) / 3600);
      const mins = Math.floor((s % 3600) / 60);
      const secs = s % 60;

      dd.textContent = String(days);
      hh.textContent = pad2(hours);
      mm.textContent = pad2(mins);
      ss.textContent = pad2(secs);

      const pretty = target.toLocaleString("ru-RU", {
        year: "numeric", month: "long", day: "numeric",
        hour: "2-digit", minute: "2-digit"
      });
      note.textContent = "–û—Ç—Å—á—ë—Ç –¥–æ " + pretty;
    }

    updateCountdown();
    setInterval(updateCountdown, 1000);

    /* ===========================
       TOAST
    ============================ */
    const toast = el("toast");
    let toastTimer = null;

    function showToast(msg) {
      if (!toast) return;
      toast.textContent = msg;
      toast.classList.add("show");
      clearTimeout(toastTimer);
      toastTimer = setTimeout(() => toast.classList.remove("show"), 1500);
    }

    /* ===========================
       RANDOM WISH + COPY
    ============================ */
    on("btnWish", "click", () => {
      safeText("bigWish", wishes[Math.floor(Math.random() * wishes.length)]);
      showToast("–ü–æ–∂–µ–ª–∞–Ω–∏–µ –æ—Ç–∫—Ä—ã—Ç–æ");
      popMini();
    });

    on("btnCopy", "click", async () => {
      const shortMsg =
        "–° –¥–Ω—ë–º —Ä–æ–∂–¥–µ–Ω–∏—è, " + birthdayPersonName + "! " +
        "–ñ–µ–ª–∞—é —Ç–µ–±–µ –ª—é–±–≤–∏, –∑–¥–æ—Ä–æ–≤—å—è –∏ –≥–æ–¥–∞, –≤ –∫–æ—Ç–æ—Ä–æ–º –≤—Å—ë —Å–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è. " +
        "–° –ª—é–±–æ–≤—å—é, " + fromName;

      try {
        await navigator.clipboard.writeText(shortMsg);
        showToast("–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ");
      } catch {
        showToast("–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–æ");
        alert(shortMsg);
      }
    });

    /* ===========================
       MUSIC
    ============================ */
    const audio = el("audio");
    let musicOn = false;

    on("btnMusic", "click", async () => {
      if (!audio) return showToast("–ë–ª–æ–∫ audio –Ω–µ –Ω–∞–π–¥–µ–Ω");
      try {
        if (!musicOn) {
          await audio.play();
          musicOn = true;
          showToast("–ú—É–∑—ã–∫–∞ –≤–∫–ª—é—á–µ–Ω–∞");
        } else {
          audio.pause();
          musicOn = false;
          showToast("–ú—É–∑—ã–∫–∞ –≤—ã–∫–ª—é—á–µ–Ω–∞");
        }
      } catch {
        showToast("–ü–æ–ª–æ–∂–∏ music.mp3 —Ä—è–¥–æ–º –∏ –≤–∫–ª—é—á–∏ –∑–≤—É–∫");
      }
    });

    /* ===========================
       CONFETTI + PARTY MODE
    ============================ */
    const c = el("confetti");
    const ctx = c ? c.getContext("2d") : null;

    function resizeCanvas(canvas, context) {
      if (!canvas || !context) return;
      canvas.width = Math.floor(window.innerWidth * devicePixelRatio);
      canvas.height = Math.floor(window.innerHeight * devicePixelRatio);
      context.setTransform(1, 0, 0, 1, 0, 0);
      context.scale(devicePixelRatio, devicePixelRatio);
    }

    resizeCanvas(c, ctx);
    window.addEventListener("resize", () => resizeCanvas(c, ctx));

    const conf = [];
    const confColors = ["#ff4fd8", "#7c5cff", "#32ffd7", "#ffffff", "#ffd166", "#06d6a0", "#ffd36b", "#ff7a59"];
    let anim = null;

    function drawStar(r) {
      const spikes = 5;
      const outer = r;
      const inner = r * 0.45;
      ctx.beginPath();
      for (let i = 0; i < spikes * 2; i++) {
        const a = (Math.PI / spikes) * i;
        const rr = i % 2 === 0 ? outer : inner;
        ctx.lineTo(Math.cos(a) * rr, Math.sin(a) * rr);
      }
      ctx.closePath();
      ctx.fill();
    }

    function spawnConfetti(amount, originX = null, originY = null, power = 1) {
      if (!ctx) return;
      const ox = originX ?? (window.innerWidth * 0.5);
      const oy = originY ?? (-20);

      for (let i = 0; i < amount; i++) {
        const speed = rand(2, 9) * power;
        const ang = rand(-Math.PI, Math.PI);
        const shapeRoll = Math.random();

        conf.push({
          x: ox + rand(-30, 30),
          y: oy + rand(-30, 30),
          r: rand(2.2, 6.8),
          vx: Math.cos(ang) * rand(0.2, 1.2) + rand(-1.4, 1.4),
          vy: Math.sin(ang) * rand(0.2, 1.2) + speed,
          rot: rand(0, Math.PI * 2),
          vr: rand(-0.25, 0.25),
          shape: shapeRoll < 0.55 ? "rect" : (shapeRoll < 0.82 ? "circle" : "star"),
          color: pick(confColors),
          life: 240 + Math.random() * 190,
          g: rand(0.02, 0.06),
          wob: rand(0.6, 1.7)
        });
      }
    }

    function tick() {
      if (!ctx) return;

      ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);

      for (let i = conf.length - 1; i >= 0; i--) {
        const p = conf[i];
        p.x += p.vx + Math.sin((Date.now() * 0.002) + p.x * 0.01) * 0.2 * p.wob;
        p.y += p.vy;
        p.vy += p.g;
        p.rot += p.vr;
        p.life -= 1;

        ctx.save();
        ctx.translate(p.x, p.y);
        ctx.rotate(p.rot);
        ctx.globalAlpha = Math.max(0, Math.min(1, p.life / 120));
        ctx.fillStyle = p.color;

        if (p.shape === "rect") {
          ctx.fillRect(-p.r, -p.r, p.r * 2.8, p.r * 1.25);
        } else if (p.shape === "circle") {
          ctx.beginPath();
          ctx.arc(0, 0, p.r, 0, Math.PI * 2);
          ctx.fill();
        } else {
          drawStar(p.r * 1.25);
        }

        ctx.restore();

        if (p.y > window.innerHeight + 90 || p.life <= 0) conf.splice(i, 1);
      }

      if (conf.length > 0) anim = requestAnimationFrame(tick);
      else {
        cancelAnimationFrame(anim);
        anim = null;
        ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);
      }
    }

    function confettiSuper() {
      spawnConfetti(520, rand(window.innerWidth * 0.25, window.innerWidth * 0.75), -10, 1.2);
      spawnConfetti(320, rand(window.innerWidth * 0.25, window.innerWidth * 0.75), -10, 1.0);
      if (!anim) tick();
    }

    function confettiBurst() {
      const x = rand(window.innerWidth * 0.2, window.innerWidth * 0.8);
      const y = rand(window.innerHeight * 0.15, window.innerHeight * 0.45);
      spawnConfetti(300, x, y, 1.2);
      spawnConfetti(200, x, y, 1.0);
      if (!anim) tick();
    }

    let partyTimer = null;

    function startPartyMode(ms = 3800) {
      clearInterval(partyTimer);
      const end = Date.now() + ms;

      partyTimer = setInterval(() => {
        confettiBurst();
        spawnFireworkBurst(rand(window.innerWidth * 0.2, window.innerWidth * 0.8), rand(window.innerHeight * 0.18, window.innerHeight * 0.5));
        if (Date.now() > end) {
          clearInterval(partyTimer);
          partyTimer = null;
        }
      }, 420);
    }

    on("btnConfetti", "click", () => {
      confettiSuper();
      showToast("–ö–æ–Ω—Ñ–µ—Ç—Ç–∏ –ø–æ—à–ª–æ");
    });

    on("btnBurst", "click", () => {
      startPartyMode(2500);
      showToast("–í–∞—É —Ä–µ–∂–∏–º");
    });

    /* ===========================
       FIREWORKS CANVAS
    ============================ */
    const fx = el("fx");
    const fctx = fx ? fx.getContext("2d") : null;

    resizeCanvas(fx, fctx);
    window.addEventListener("resize", () => resizeCanvas(fx, fctx));

    const sparks = [];
    let fxAnim = null;

    function spawnFireworkBurst(x, y) {
      if (!fctx) return;
      const n = 95 + Math.floor(Math.random() * 85);
      for (let i = 0; i < n; i++) {
        const a = (Math.PI * 2) * (i / n) + rand(-0.13, 0.13);
        const sp = rand(2.2, 7.2);
        sparks.push({
          x, y,
          vx: Math.cos(a) * sp,
          vy: Math.sin(a) * sp,
          r: rand(1.1, 2.2),
          life: 95 + Math.random() * 55,
          color: pick(confColors),
          g: rand(0.02, 0.06)
        });
      }
    }

    function fxTick() {
      if (!fctx) return;

      fctx.clearRect(0, 0, window.innerWidth, window.innerHeight);

      for (let i = sparks.length - 1; i >= 0; i--) {
        const p = sparks[i];
        p.x += p.vx;
        p.y += p.vy;
        p.vy += p.g;
        p.life -= 1;

        fctx.save();
        fctx.globalAlpha = Math.max(0, Math.min(1, p.life / 65));
        fctx.fillStyle = p.color;
        fctx.beginPath();
        fctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
        fctx.fill();
        fctx.restore();

        if (p.life <= 0) sparks.splice(i, 1);
      }

      if (sparks.length > 0) fxAnim = requestAnimationFrame(fxTick);
      else {
        cancelAnimationFrame(fxAnim);
        fxAnim = null;
        fctx.clearRect(0, 0, window.innerWidth, window.innerHeight);
      }
    }

    function fireworksShow() {
      for (let k = 0; k < 6; k++) {
        spawnFireworkBurst(
          rand(window.innerWidth * 0.2, window.innerWidth * 0.8),
          rand(window.innerHeight * 0.18, window.innerHeight * 0.5)
        );
      }
      if (!fxAnim) fxTick();
    }

    on("btnFireworks", "click", () => {
      fireworksShow();
      confettiBurst();
      showToast("–°–∞–ª—é—Ç");
    });

    /* ===========================
       WOW OPEN
    ============================ */
    const overlay = el("overlay");
    const overlayCard = el("overlayCard");

    function popMini() {
      spawnConfetti(150, rand(window.innerWidth * 0.25, window.innerWidth * 0.75), rand(window.innerHeight * 0.1, window.innerHeight * 0.35), 1);
      if (!anim) tick();
      spawnFireworkBurst(rand(window.innerWidth * 0.25, window.innerWidth * 0.75), rand(window.innerHeight * 0.2, window.innerHeight * 0.45));
      if (!fxAnim) fxTick();
    }

    function revealAllPhotos() {
      qsa("figure.shot").forEach((elm, i) => setTimeout(() => elm.classList.add("in"), i * 25));
    }

    function openSurprise() {
      if (overlay) overlay.classList.add("hide");
      fireworksShow();

      spawnConfetti(980, window.innerWidth * 0.5, window.innerHeight * 0.18, 1.25);
      spawnConfetti(620, window.innerWidth * 0.5, window.innerHeight * 0.18, 1.05);

      if (!anim) tick();
      startPartyMode(4200);
      showToast("–í–∞—É");

      setTimeout(() => { if (overlay) overlay.remove(); }, 700);
      setTimeout(() => { revealAllPhotos(); }, 650);
    }

    on("btnOpen", "click", openSurprise);

    on("btnMini", "click", () => {
      if (overlayCard) {
        overlayCard.classList.add("shake");
        setTimeout(() => overlayCard.classList.remove("shake"), 650);
      }
      popMini();
    });

    /* ===========================
       STARFIELD
    ============================ */
    const starCanvas = el("stars");
    const sctx = starCanvas ? starCanvas.getContext("2d") : null;
    let stars = [];

    function resizeStars() {
      if (!starCanvas || !sctx) return;
      starCanvas.width = Math.floor(window.innerWidth * devicePixelRatio);
      starCanvas.height = Math.floor(window.innerHeight * devicePixelRatio);
      sctx.setTransform(1, 0, 0, 1, 0, 0);
      sctx.scale(devicePixelRatio, devicePixelRatio);

      const count = Math.floor(Math.min(280, window.innerWidth / 5));
      stars = Array.from({ length: count }, () => ({
        x: Math.random() * window.innerWidth,
        y: Math.random() * window.innerHeight,
        r: Math.random() * 1.7 + 0.25,
        a: Math.random() * 0.6 + 0.12,
        tw: Math.random() * 0.018 + 0.004
      }));
    }

    function drawStars() {
      if (!sctx) return;
      sctx.clearRect(0, 0, window.innerWidth, window.innerHeight);

      for (const st of stars) {
        st.a += Math.sin((Date.now() * st.tw) + st.x) * 0.002;
        const alpha = Math.max(0.07, Math.min(0.9, st.a));
        sctx.globalAlpha = alpha;
        sctx.fillStyle = "#ffffff";
        sctx.beginPath();
        sctx.arc(st.x, st.y, st.r, 0, Math.PI * 2);
        sctx.fill();
      }
      requestAnimationFrame(drawStars);
    }

    resizeStars();
    window.addEventListener("resize", resizeStars);
    drawStars();

    /* ===========================
       –§–û–¢–û –ì–ê–õ–ï–†–ï–Ø
    ============================ */
    const gallery = el("gallery");
    let io = null;

    function hookReveal() {
      if (!("IntersectionObserver" in window)) return revealAllPhotos();
      if (io) io.disconnect();

      io = new IntersectionObserver((entries) => {
        entries.forEach(e => {
          if (e.isIntersecting) {
            e.target.classList.add("in");
            io.unobserve(e.target);
          }
        });
      }, { threshold: 0.08 });

      qsa("figure.shot").forEach(elm => io.observe(elm));
    }

    function renderGallery() {
      if (!gallery) return;
      gallery.innerHTML = "";

      const meta = el("photoMeta");
      if (meta) meta.textContent = "–§–æ—Ç–æ: " + photos.length + " —à—Ç. –û—Ç–∫—Ä—ã–≤–∞–π –ª—é–±–æ–µ, —Å–≤–∞–π–ø–∞–π, –≤–∫–ª—é—á–∞–π –∞–≤—Ç–æ.";

      const frag = document.createDocumentFragment();

      photos.forEach((p, idx) => {
        const fig = document.createElement("figure");
        fig.className = "shot";
        fig.dataset.index = String(idx);

        const img = document.createElement("img");
        img.loading = "lazy";
        img.decoding = "async";
        img.alt = p.cap || ("–§–æ—Ç–æ " + (idx + 1));
        img.src = p.src;

        img.addEventListener("load", () => img.classList.add("loaded"), { once: true });

        const cap = document.createElement("figcaption");
        cap.className = "cap";
        cap.textContent = p.cap || "";

        fig.appendChild(img);
        fig.appendChild(cap);

        fig.addEventListener("click", () => {
          openLightbox(idx);
          confettiBurst();
        });

        frag.appendChild(fig);
      });

      gallery.appendChild(frag);
      hookReveal();
    }

    on("btnShuffle", "click", () => {
      photos = photos
        .map(v => ({ v, s: Math.random() }))
        .sort((a, b) => a.s - b.s)
        .map(x => x.v);

      renderGallery();
      showToast("–ü–µ—Ä–µ–º–µ—à–∞–Ω–æ");
      popMini();
    });

    renderGallery();

    /* ===========================
       LIGHTBOX
    ============================ */
    const lightbox = el("lightbox");
    const lbImg = el("lbImg");
    const lbCap = el("lbCap");
    const lbCount = el("lbCount");
    let lbIndex = 0;
    let lbAuto = null;

    function setLB(index) {
      if (!photos.length || !lbImg || !lbCount) return;
      lbIndex = (index + photos.length) % photos.length;

      const p = photos[lbIndex];
      lbImg.src = p.src;
      lbImg.alt = p.cap || ("–§–æ—Ç–æ " + (lbIndex + 1));
      if (lbCap) lbCap.textContent = p.cap || "";
      lbCount.textContent = (lbIndex + 1) + " –∏–∑ " + photos.length;

      const next = photos[(lbIndex + 1) % photos.length]?.src;
      if (next) {
        const im = new Image();
        im.src = next;
      }
    }

    function openLightbox(index) {
      if (!lightbox || !photos.length) return;
      lightbox.classList.add("show");
      lightbox.setAttribute("aria-hidden", "false");
      setLB(index);
      showToast("–û—Ç–∫—Ä—ã—Ç–æ");
    }

    function stopAuto() {
      if (!lbAuto) return;
      clearInterval(lbAuto);
      lbAuto = null;
      showToast("–ê–≤—Ç–æ –≤—ã–∫–ª—é—á–µ–Ω–æ");
    }

    function closeLightbox() {
      if (!lightbox) return;
      lightbox.classList.remove("show");
      lightbox.setAttribute("aria-hidden", "true");
      stopAuto();
    }

    function nextLB() { setLB(lbIndex + 1); }
    function prevLB() { setLB(lbIndex - 1); }

    function startAuto() {
      stopAuto();
      lbAuto = setInterval(() => {
        nextLB();
        spawnConfetti(90, rand(window.innerWidth * 0.35, window.innerWidth * 0.65), rand(window.innerHeight * 0.18, window.innerHeight * 0.35), 0.95);
        if (!anim) tick();
      }, 1800);
      showToast("–ê–≤—Ç–æ –≤–∫–ª—é—á–µ–Ω–æ");
    }

    on("lbClose", "click", closeLightbox);
    on("lbNext", "click", nextLB);
    on("lbPrev", "click", prevLB);
    on("lbPlay", "click", () => lbAuto ? stopAuto() : startAuto());

    if (lightbox) {
      lightbox.addEventListener("click", (e) => {
        if (e.target === lightbox) closeLightbox();
      });
    }

    document.addEventListener("keydown", (e) => {
      if (!lightbox || !lightbox.classList.contains("show")) return;
      if (e.key === "Escape") closeLightbox();
      if (e.key === "ArrowRight") nextLB();
      if (e.key === "ArrowLeft") prevLB();
    });

    let touchX = null;

    if (lightbox) {
      lightbox.addEventListener("touchstart", (e) => {
        touchX = e.touches?.[0]?.clientX ?? null;
      }, { passive: true });

      lightbox.addEventListener("touchend", (e) => {
        if (touchX === null) return;
        const x2 = e.changedTouches?.[0]?.clientX ?? touchX;
        const dx = x2 - touchX;

        if (Math.abs(dx) > 45) {
          if (dx < 0) nextLB();
          else prevLB();
        }
        touchX = null;
      });
    }

    on("btnSlideshow", "click", () => {
      openLightbox(0);
      startAuto();
      fireworksShow();
    });

    /* ===========================
       SECRET BOX
    ============================ */
    function normalizeCode(s) {
      return String(s || "").trim().toLowerCase().replace(/\s+/g, "");
    }

    on("btnSecret", "click", () => {
      const inp = el("secretInput");
      const reward = el("secretReward");
      if (!inp || !reward) return showToast("–°–µ–∫—Ä–µ—Ç–Ω—ã–π –±–ª–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω");

      const v = normalizeCode(inp.value);
      const hit = secretEntries.find(x => normalizeCode(x.code) === v);

      if (hit) {
        reward.style.display = "block";
        reward.textContent = hit.text;
        showToast("–û—Ç–∫—Ä—ã—Ç–æ");
        fireworksShow();
        spawnConfetti(900, window.innerWidth * 0.5, window.innerHeight * 0.18, 1.25);
        if (!anim) tick();
        startPartyMode(3200);
        launchFinale();
      } else {
        showToast("–ù–µ —Ç–æ—Ç –∫–æ–¥");
        popMini();
      }
    });

    /* ===========================
       TIMELINE
    ============================ */
    const timelineEvents = [
  { date: "", title: "–ü–µ—Ä–≤–∞—è –≤—Å—Ç—Ä–µ—á–∞", text: "–ù–∞—à–∞ –ø–µ—Ä–≤–∞—è –≤—Å—Ç—Ä–µ—á–∞ –±—ã–ª–∞ –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ–π, –Ω–æ –∏–º–µ–Ω–Ω–æ –ø–æ—ç—Ç–æ–º—É –æ—Å–æ–±–µ–Ω–Ω–æ–π.", photo: "—Ñ–æ—Ç–æ7.jpg" },
  { date: "", title: "–°–º–µ—Ö, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—Å —Å–≤—è–∑–∞–ª", text: "–ù–∞—à–∞ –¥—Ä—É–∂–±–∞ —ç—Ç–æ –º–æ–º–µ–Ω—Ç—ã, –∫–æ–≥–¥–∞ —Å–º–µ—ë—à—å—Å—è –¥–æ —Å–ª—ë–∑ –∏ –Ω–µ —Ö–æ—á–µ—Ç—Å—è, —á—Ç–æ–±—ã –¥–µ–Ω—å –∑–∞–∫–∞–Ω—á–∏–≤–∞–ª—Å—è. –ú—ã —Å–æ–±–∏—Ä–∞–ª–∏ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è –∏–∑ —à—É—Ç–æ–∫, –ø—Ä–æ–≥—É–ª–æ–∫ –∏ —Å–ø–æ–Ω—Ç–∞–Ω–Ω—ã—Ö –∏–¥–µ–π, –∏ –∫–∞–∂–¥—ã–π —Ç–∞–∫–æ–π –º–æ–º–µ–Ω—Ç –¥–µ–ª–∞–ª –Ω–∞—Å –µ—â—ë –±–ª–∏–∂–µ. –≠—Ç–∏ –≤–µ—Å—ë–ª—ã–µ –≤—Ä–µ–º–µ–Ω–∞ –Ω–∞–≤—Å–µ–≥–¥–∞ –æ—Å—Ç–∞–Ω—É—Ç—Å—è –≤ —Å–µ—Ä–¥—Ü–µ. üíõ", photo: "—Ñ–æ—Ç–æ11.jpg" },
  { date: "", title: "–°–∫–≤–æ–∑—å —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ", text: "–ú–µ–∂–¥—É –Ω–∞–º–∏ –∫–∏–ª–æ–º–µ—Ç—Ä—ã, –Ω–æ –æ–Ω–∏ –Ω–µ –º–æ–≥—É—Ç –æ—Å–ª–∞–±–∏—Ç—å —Ç–æ, —á—Ç–æ –∂–∏–≤—ë—Ç –≤ —Å–µ—Ä–¥—Ü–µ. –ù–∞—à–∞ –ª—é–±–æ–≤—å —Å–∏–ª—å–Ω–µ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è: –æ–Ω–∞ –≤ –∫–∞–∂–¥–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏, –≤ –∫–∞–∂–¥–æ–º –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–∏ –∏ –≤ —Ç–∏—Ö–æ–π –≤–µ—Ä–µ –¥—Ä—É–≥ –≤ –¥—Ä—É–≥–∞. –ú—ã –¥–∞–ª–µ–∫–æ, –Ω–æ –≤—Å—ë —Ä–∞–≤–Ω–æ —Ä—è–¥–æ–º –ø–æ –Ω–∞—Å—Ç–æ—è—â–µ–º—É. üí´", photo: "—Ñ–æ—Ç–æ9.jpg" },
];
    function renderTimeline() {
      const t = el("timeline");
      if (!t) return;

      t.innerHTML = "";
      timelineEvents.forEach((e) => {
        const d = document.createElement("details");
        d.className = "details";

        const s = document.createElement("summary");
        s.textContent = e.date + "  " + e.title;

        const p = document.createElement("p");
        p.textContent = e.text;

        d.appendChild(s);
        d.appendChild(p);

        if (e.photo) {
          const img = document.createElement("img");
          img.loading = "lazy";
          img.decoding = "async";
          img.src = e.photo;
          img.alt = e.title;
          d.appendChild(img);
        }

        d.addEventListener("toggle", () => { if (d.open) confettiBurst(); });
        t.appendChild(d);
      });
    }

    renderTimeline();

    /* ===========================
       HEART GAME
    ============================ */
    const gameArea = el("gameArea");
    const gameReward = el("gameReward");
    let gameOn = false;
    let gameScore = 0;
    const gameTarget = 12;
    let spawnTimer = null;
    let endTimer = null;

    function updateGameScore() {
      safeText("gameScore", "–°—á—ë—Ç: " + gameScore + " –∏–∑ " + gameTarget);
    }

    function clearHearts() {
      if (!gameArea) return;
      qsa("#gameArea .heart").forEach(h => h.remove());
    }

    function spawnHeart() {
      if (!gameArea) return;

      const h = document.createElement("div");
      h.className = "heart";
      h.textContent = pick(["üíñ", "üíó", "üíò", "üíù", "üíû", "üíï"]);
      h.style.left = Math.floor(rand(6, 92)) + "%";
      h.style.fontSize = rand(18, 34) + "px";
      h.style.animationDuration = rand(1.4, 2.6) + "s";

      h.addEventListener("click", () => {
        if (!gameOn) return;
        h.remove();
        gameScore += 1;
        updateGameScore();

        spawnConfetti(60, rand(window.innerWidth * 0.35, window.innerWidth * 0.65), rand(window.innerHeight * 0.18, window.innerHeight * 0.35), 0.95);
        if (!anim) tick();

        if (gameScore >= gameTarget) finishGame(true);
      });

      h.addEventListener("animationend", () => h.remove(), { once: true });
      gameArea.appendChild(h);
    }

    function startGame() {
      if (!gameArea || !gameReward) return showToast("–ò–≥—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞");
      if (gameOn) return;

      gameOn = true;
      gameScore = 0;
      updateGameScore();
      gameReward.style.display = "none";
      clearHearts();

      showToast("–ü–æ–µ—Ö–∞–ª–∏");
      popMini();

      spawnTimer = setInterval(spawnHeart, 160);
      endTimer = setTimeout(() => finishGame(false), 20000);
    }

    function finishGame(win) {
      if (!gameOn) return;

      gameOn = false;
      clearInterval(spawnTimer);
      clearTimeout(endTimer);
      spawnTimer = null;
      endTimer = null;

      setTimeout(clearHearts, 250);

      if (win) {
        if (gameReward) {
          gameReward.textContent = "–ù–∞–≥—Ä–∞–¥–∞: –µ—â—ë –æ–¥–Ω–æ –ø—Ä–∏–∑–Ω–∞–Ω–∏–µ. –Ø –ª—é–±–ª—é —Ç–µ–±—è. –ò —Ö–æ—á—É —Ä—è–¥–æ–º —Ç–µ–±—è –≤—Å–µ–≥–¥–∞.";
          gameReward.style.display = "block";
        }
        fireworksShow();
        spawnConfetti(1100, window.innerWidth * 0.5, window.innerHeight * 0.18, 1.3);
        if (!anim) tick();
        startPartyMode(4200);
        launchFinale();
        showToast("–¢—ã –≤—ã–∏–≥—Ä–∞–ª–∞");
      } else {
        showToast("–ï—â—ë —Ä–∞–∑");
        popMini();
      }
    }

    on("btnGameStart", "click", startGame);
    on("btnGameStop", "click", () => finishGame(false));

    /* ===========================
       FINALE OVERLAY
    ============================ */
    const finaleOverlay = el("finaleOverlay");
    safeText("finaleText", finaleTextDefault);

    function launchFinale() {
      if (!finaleOverlay) return;
      finaleOverlay.classList.add("show");
      fireworksShow();
      spawnConfetti(1400, window.innerWidth * 0.5, window.innerHeight * 0.16, 1.35);
      if (!anim) tick();
      startPartyMode(5200);
    }

    on("btnFinale", "click", launchFinale);
    on("finaleClose", "click", () => { if (finaleOverlay) finaleOverlay.classList.remove("show"); });
    on("finaleAgain", "click", () => { launchFinale(); showToast("–í–∞—É"); });

    if (finaleOverlay) {
      finaleOverlay.addEventListener("click", (e) => {
        if (e.target === finaleOverlay) finaleOverlay.classList.remove("show");
      });
    }

    /* ===========================
       AUTO BIRTHDAY EXTRA
    ============================ */
    const isBirthday = () => {
      const now = new Date();
      const d = new Date(birthdayDateISO);
      return now.getFullYear() === d.getFullYear() &&
        now.getMonth() === d.getMonth() &&
        now.getDate() === d.getDate();
    };

    if (isBirthday()) {
      safeText("sub", "–°–µ–≥–æ–¥–Ω—è —Ç–≤–æ–π –¥–µ–Ω—å. –õ—é–±–æ–≤—å –±–µ–∑ –ª–∏–º–∏—Ç–æ–≤.");
      setTimeout(() => {
        fireworksShow();
        spawnConfetti(1200, window.innerWidth * 0.5, window.innerHeight * 0.18, 1.3);
        if (!anim) tick();
        startPartyMode(5200);
      }, 600);
    }
  </script>
</body>
</html>
